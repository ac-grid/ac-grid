# RFC-0006: åˆ†é¡µåŠŸèƒ½

**çŠ¶æ€**: ğŸ“ è‰ç¨¿  
**ç‰ˆæœ¬**: 0.2.0  
**ä½œè€…**: Albert Li  
**æ—¥æœŸ**: 2026-01-24  
**ç›¸å…³ RFC**: [0001-ac-grid-architecture](./0001-ac-grid-architecture.md), [0005-virtual-scrolling](./0005-virtual-scrolling.md)

## ç›®å½•

- [æ¦‚è¿°](#æ¦‚è¿°)
- [åŠ¨æœº](#åŠ¨æœº)
- [è®¾è®¡ç›®æ ‡](#è®¾è®¡ç›®æ ‡)
- [æŠ€æœ¯æ–¹æ¡ˆ](#æŠ€æœ¯æ–¹æ¡ˆ)
- [API è®¾è®¡](#api-è®¾è®¡)
- [å®ç°ç»†èŠ‚](#å®ç°ç»†èŠ‚)
- [æµ‹è¯•ç­–ç•¥](#æµ‹è¯•ç­–ç•¥)
- [æ€§èƒ½è€ƒè™‘](#æ€§èƒ½è€ƒè™‘)
- [å‘åå…¼å®¹æ€§](#å‘åå…¼å®¹æ€§)
- [æ›¿ä»£æ–¹æ¡ˆ](#æ›¿ä»£æ–¹æ¡ˆ)
- [å¼€æ”¾é—®é¢˜](#å¼€æ”¾é—®é¢˜)
- [å‚è€ƒèµ„æ–™](#å‚è€ƒèµ„æ–™)

## æ¦‚è¿°

ä¸º AC Grid æ·»åŠ åˆ†é¡µåŠŸèƒ½ï¼Œæ”¯æŒå‰ç«¯åˆ†é¡µå’ŒæœåŠ¡ç«¯åˆ†é¡µï¼Œæä¾›åˆ†é¡µæ§ä»¶å’Œç¼–ç¨‹å¼åˆ†é¡µ APIã€‚

## åŠ¨æœº

### é—®é¢˜é™ˆè¿°
å¯¹äºå¤§æ•°æ®é›†ï¼Œä¸€æ¬¡æ€§æ¸²æŸ“æ‰€æœ‰æ•°æ®ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚åˆ†é¡µå¯ä»¥å°†æ•°æ®åˆ†æˆå¤šä¸ªé¡µé¢ï¼Œæ¯æ¬¡åªåŠ è½½å’Œæ¸²æŸ“å½“å‰é¡µçš„æ•°æ®ã€‚

### ç”¨æˆ·åœºæ™¯

**åœºæ™¯ 1ï¼šå‰ç«¯åˆ†é¡µ**
```typescript
// å®¢æˆ·ç«¯æ•°æ®åˆ†é¡µ
// ç”¨æˆ·ç‚¹å‡»é¡µç åˆ‡æ¢é¡µé¢
// åªæ¸²æŸ“å½“å‰é¡µçš„æ•°æ®
```

**åœºæ™¯ 2ï¼šæœåŠ¡ç«¯åˆ†é¡µ**
```typescript
// æœåŠ¡ç«¯æ•°æ®åˆ†é¡µ
// ç”¨æˆ·åˆ‡æ¢é¡µé¢æ—¶è¯·æ±‚æ–°æ•°æ®
// æ”¯æŒæ’åºå’Œè¿‡æ»¤
```

### ä¸ ag-Grid çš„å¯¹æ¯”
ag-Grid ç¤¾åŒºç‰ˆæä¾›ï¼š
- âœ… å‰ç«¯åˆ†é¡µ
- âœ… æœåŠ¡ç«¯åˆ†é¡µ
- âœ… åˆ†é¡µæ§ä»¶
- âœ… å¯é…ç½®æ¯é¡µå¤§å°

## è®¾è®¡ç›®æ ‡

- [ ] **ç›®æ ‡ 1**: æ”¯æŒå‰ç«¯åˆ†é¡µ
- [ ] **ç›®æ ‡ 2**: æ”¯æŒæœåŠ¡ç«¯åˆ†é¡µ
- [ ] **ç›®æ ‡ 3**: æä¾›åˆ†é¡µæ§ä»¶ UI
- [ ] **ç›®æ ‡ 4**: æ”¯æŒè‡ªå®šä¹‰æ¯é¡µå¤§å°
- [ ] **ç›®æ ‡ 5**: ä¸æ’åºå’Œè¿‡æ»¤é›†æˆ

### éç›®æ ‡
- âŒ æ— é™æ»šåŠ¨ï¼ˆä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ï¼‰
- âŒ åˆ†é¡µåŠ¨ç”»

## æŠ€æœ¯æ–¹æ¡ˆ

### æ–¹æ¡ˆæ¦‚è¿°
åˆ©ç”¨ `@tanstack/table-core` çš„ `getPaginationRowModel` å®ç°å‰ç«¯åˆ†é¡µï¼Œé€šè¿‡å›è°ƒå‡½æ•°æ”¯æŒæœåŠ¡ç«¯åˆ†é¡µã€‚

### æ¶æ„è®¾è®¡

```
åˆ†é¡µçŠ¶æ€å˜åŒ–
    â†“
å‰ç«¯åˆ†é¡µ: getPaginationRowModel() â†’ è¿‡æ»¤è¡Œæ•°æ®
æœåŠ¡ç«¯åˆ†é¡µ: è§¦å‘å›è°ƒ â†’ è¯·æ±‚æ–°æ•°æ® â†’ æ›´æ–°æ•°æ®
    â†“
é‡æ–°æ¸²æŸ“å½“å‰é¡µ
```

### æ ¸å¿ƒç»„ä»¶

#### ç»„ä»¶ 1: PaginationControls
**èŒè´£**ï¼šåˆ†é¡µæ§ä»¶ UI

**æ¥å£**ï¼š
```typescript
interface PaginationControlsProps {
  currentPage: number;
  totalPages: number;
  pageSize: number;
  onPageChange: (page: number) => void;
  onPageSizeChange: (size: number) => void;
}
```

## API è®¾è®¡

### å…¬å…± API

#### é…ç½®é€‰é¡¹
```typescript
interface GridOptions {
  // å¯ç”¨åˆ†é¡µ
  enablePagination?: boolean;
  // åˆ†é¡µæ¨¡å¼
  paginationMode?: 'client' | 'server';
  // æ¯é¡µå¤§å°
  pageSize?: number;
  // æ¯é¡µå¤§å°é€‰é¡¹
  pageSizeOptions?: number[];
  // æœåŠ¡ç«¯åˆ†é¡µå›è°ƒ
  onServerPagination?: (page: number, pageSize: number) => Promise<PaginatedData>;
}
```

#### æ–¹æ³•
```typescript
class Grid {
  /**
   * è·³è½¬åˆ°æŒ‡å®šé¡µ
   * @param page - é¡µç ï¼ˆä» 0 å¼€å§‹ï¼‰
   */
  goToPage(page: number): void;

  /**
   * è®¾ç½®æ¯é¡µå¤§å°
   * @param size - æ¯é¡µå¤§å°
   */
  setPageSize(size: number): void;

  /**
   * è·å–å½“å‰é¡µä¿¡æ¯
   */
  getPaginationState(): PaginationState;
}
```

### ç±»å‹å®šä¹‰
```typescript
export interface PaginationState {
  pageIndex: number;
  pageSize: number;
  totalRows: number;
  totalPages: number;
}

export interface PaginatedData<T> {
  data: T[];
  total: number;
  page: number;
  pageSize: number;
}
```

## å®ç°ç»†èŠ‚

### é˜¶æ®µ 1: å‰ç«¯åˆ†é¡µ
**é¢„è®¡æ—¶é—´**: 3 å¤©

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] é›†æˆ `getPaginationRowModel`
- [ ] å®ç°åˆ†é¡µçŠ¶æ€ç®¡ç†
- [ ] å®ç°åˆ†é¡µé€»è¾‘

### é˜¶æ®µ 2: åˆ†é¡µæ§ä»¶ UI
**é¢„è®¡æ—¶é—´**: 2 å¤©

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] åˆ›å»º PaginationControls ç»„ä»¶
- [ ] å®ç°é¡µç æ˜¾ç¤º
- [ ] å®ç°æ¯é¡µå¤§å°é€‰æ‹©

### é˜¶æ®µ 3: æœåŠ¡ç«¯åˆ†é¡µ
**é¢„è®¡æ—¶é—´**: 2 å¤©

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] å®ç°æœåŠ¡ç«¯åˆ†é¡µå›è°ƒ
- [ ] å®ç°åŠ è½½çŠ¶æ€
- [ ] é›†æˆæ’åºå’Œè¿‡æ»¤

## æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•
- æµ‹è¯•å‰ç«¯åˆ†é¡µé€»è¾‘
- æµ‹è¯•æœåŠ¡ç«¯åˆ†é¡µå›è°ƒ
- æµ‹è¯•åˆ†é¡µçŠ¶æ€ç®¡ç†
- æµ‹è¯•ä¸æ’åº/è¿‡æ»¤çš„é›†æˆ

### æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡
- **è¯­å¥è¦†ç›–ç‡**: 100%
- **åˆ†æ”¯è¦†ç›–ç‡**: 100%
- **å‡½æ•°è¦†ç›–ç‡**: 100%
- **è¡Œè¦†ç›–ç‡**: 100%

## æ€§èƒ½è€ƒè™‘

### æ€§èƒ½ç›®æ ‡
- **åˆ†é¡µåˆ‡æ¢**: < 50ms
- **æœåŠ¡ç«¯è¯·æ±‚**: å¼‚æ­¥å¤„ç†

## å‘åå…¼å®¹æ€§

### ç ´åæ€§å˜æ›´
æ— ã€‚åˆ†é¡µæ˜¯å¯é€‰çš„ï¼Œé»˜è®¤ç¦ç”¨ã€‚

## æ›¿ä»£æ–¹æ¡ˆ

### æ–¹æ¡ˆ A: ä»…å‰ç«¯åˆ†é¡µ
**æè¿°**: åªæ”¯æŒå®¢æˆ·ç«¯åˆ†é¡µ

**ä¼˜ç‚¹**:
- å®ç°ç®€å•

**ç¼ºç‚¹**:
- ä¸æ”¯æŒå¤§æ•°æ®é›†

### æ–¹æ¡ˆ B: å‰ç«¯ + æœåŠ¡ç«¯åˆ†é¡µï¼ˆå½“å‰æ–¹æ¡ˆï¼‰
**æè¿°**: æ”¯æŒä¸¤ç§æ¨¡å¼

**ä¼˜ç‚¹**:
- çµæ´»æ€§é«˜
- æ”¯æŒå„ç§åœºæ™¯

**ç¼ºç‚¹**:
- å®ç°å¤æ‚åº¦è¾ƒé«˜

## å¼€æ”¾é—®é¢˜

- [ ] **é—®é¢˜ 1**: åˆ†é¡µæ§ä»¶æ ·å¼å’Œä½ç½®ï¼Ÿ
- [ ] **é—®é¢˜ 2**: æ˜¯å¦éœ€è¦åˆ†é¡µä¿¡æ¯æ˜¾ç¤ºï¼ˆå¦‚ "æ˜¾ç¤º 1-10 æ¡ï¼Œå…± 100 æ¡"ï¼‰ï¼Ÿ

## å‚è€ƒèµ„æ–™

- [ag-Grid åˆ†é¡µæ–‡æ¡£](https://www.ag-grid.com/javascript-data-grid/pagination/)
- [@tanstack/table-core åˆ†é¡µæ–‡æ¡£](https://tanstack.com/table/latest/docs/guide/pagination)
